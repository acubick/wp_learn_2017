{"version":3,"sources":["webpack://@wppunk/shipping-nova-poshta-for-woocommerce/./assets/.src/js/main.js"],"names":["NovaPoshta","window","document","$","app","init","length","initCitySearch","initWarehouseSearch","ajaxComplete","event","xhr","settings","getQueryParams","url","$city","np_select2","language","shippingNovaPoshtaForWoocommerce","minimumInputLength","ajax","type","data","params","nonce","term","processResults","results","on","body","trigger","$warehouse","href","reg","RegExp","queryString","exec","jQuery"],"mappings":";;;;AAAA;AAEA,IAAMA,UAAU,GAAGC,MAAM,CAACD,UAAP,IAAuB,UAAUE,QAAV,EAAoBD,MAApB,EAA4BE,CAA5B,EAAgC;AACzE,MAAMC,GAAG,GAAG;AACXC,QADW,kBACJ;AACNF,OAAC,CAAE,YAAW;AACb,YAAK,CAAEA,CAAC,CAAE,6FAAF,CAAD,CAAmGG,MAA1G,EAAmH;AAClH;AACA;;AAEDF,WAAG,CAACG,cAAJ;AACAH,WAAG,CAACI,mBAAJ;AACA,OAPA,CAAD;AASAL,OAAC,CAAED,QAAF,CAAD,CAAcO,YAAd,CAA4B,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBC,QAAtB,EAAiC;AAC5D,YAAK,0BAA0BR,GAAG,CAACS,cAAJ,CAAoB,SAApB,EAA+BD,QAAQ,CAACE,GAAxC,CAA/B,EAA+E;AAC9EV,aAAG,CAACG,cAAJ;AACAH,aAAG,CAACI,mBAAJ;AACA;AACD,OALD;AAMA,KAjBU;AAkBXD,kBAlBW,4BAkBM;AAChB,UAAMQ,KAAK,GAAGZ,CAAC,CAAE,4CAAF,CAAf;;AACA,UAAK,CAAEY,KAAK,CAACT,MAAb,EAAsB;AACrB;AACA;;AACDS,WAAK,CAACC,UAAN,CAAkB;AACjBC,gBAAQ,EAAEC,gCAAgC,CAACD,QAD1B;AAEjBE,0BAAkB,EAAE,CAFH;AAGjBC,YAAI,EAAE;AACLN,aAAG,EAAEI,gCAAgC,CAACJ,GADjC;AAELO,cAAI,EAAE,MAFD;AAGLC,cAAI,EAAE,cAAUC,MAAV,EAAmB;AACxB,mBAAO;AACN,uBAASL,gCAAgC,CAACM,KADpC;AAEN,wBAAU,2CAFJ;AAGN,wBAAUD,MAAM,CAACE;AAHX,aAAP;AAKA,WATI;AAULC,wBAAc,EAAE,wBAAUJ,IAAV,EAAiB;AAChC,mBAAO;AACNK,qBAAO,EAAEL;AADH,aAAP;AAGA;AAdI;AAHW,OAAlB,EAmBIM,EAnBJ,CAmBQ,gBAnBR,EAmB0B,YAAW;AACpCzB,SAAC,CAAED,QAAQ,CAAC2B,IAAX,CAAD,CAAmBC,OAAnB,CAA4B,iBAA5B;AACA,OArBD;AAsBA,KA7CU;AA8CXtB,uBA9CW,iCA8CW;AACrB,UAAMuB,UAAU,GAAG5B,CAAC,CAAE,iDAAF,CAApB;;AACA,UAAK,CAAE4B,UAAU,CAACzB,MAAlB,EAA2B;AAC1B;AACA;;AACDyB,gBAAU,CAACf,UAAX,CAAuB;AACtBC,gBAAQ,EAAEC,gCAAgC,CAACD;AADrB,OAAvB;AAGA,KAtDU;AAuDXJ,kBAvDW,0BAuDKU,MAvDL,EAuDaT,GAvDb,EAuDmB;AAC7B,UAAIkB,IAAI,GAAGlB,GAAX;AACA,UAAImB,GAAG,GAAG,IAAIC,MAAJ,CAAY,SAASX,MAAT,GAAkB,WAA9B,EAA2C,GAA3C,CAAV;AACA,UAAIY,WAAW,GAAGF,GAAG,CAACG,IAAJ,CAAUJ,IAAV,CAAlB;AACA,aAAOG,WAAW,GAAGA,WAAW,CAAE,CAAF,CAAd,GAAsB,EAAxC;AACA;AA5DU,GAAZ;AA+DA,SAAO/B,GAAP;AACA,CAjEyC,CAiEvCF,QAjEuC,EAiE7BD,MAjE6B,EAiErBoC,MAjEqB,CAA1C;;AAmEArC,UAAU,CAACK,IAAX,G","file":"/js/main.js","sourcesContent":["/* global jQuery, shippingNovaPoshtaForWoocommerce */\n\nconst NovaPoshta = window.NovaPoshta || ( function( document, window, $ ) {\n\tconst app = {\n\t\tinit() {\n\t\t\t$( function() {\n\t\t\t\tif ( ! $( '#shipping_nova_poshta_for_woocommerce_city, #shipping_nova_poshta_for_woocommerce_warehouse' ).length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tapp.initCitySearch();\n\t\t\t\tapp.initWarehouseSearch();\n\t\t\t} );\n\n\t\t\t$( document ).ajaxComplete( function( event, xhr, settings ) {\n\t\t\t\tif ( 'update_order_review' === app.getQueryParams( 'wc-ajax', settings.url ) ) {\n\t\t\t\t\tapp.initCitySearch();\n\t\t\t\t\tapp.initWarehouseSearch();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t\tinitCitySearch() {\n\t\t\tconst $city = $( '#shipping_nova_poshta_for_woocommerce_city' );\n\t\t\tif ( ! $city.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$city.np_select2( {\n\t\t\t\tlanguage: shippingNovaPoshtaForWoocommerce.language,\n\t\t\t\tminimumInputLength: 1,\n\t\t\t\tajax: {\n\t\t\t\t\turl: shippingNovaPoshtaForWoocommerce.url,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdata: function( params ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t'nonce': shippingNovaPoshtaForWoocommerce.nonce,\n\t\t\t\t\t\t\t'action': 'shipping_nova_poshta_for_woocommerce_city',\n\t\t\t\t\t\t\t'search': params.term,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tprocessResults: function( data ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresults: data,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t} ).on( 'select2:select', function() {\n\t\t\t\t$( document.body ).trigger( 'update_checkout' );\n\t\t\t} );\n\t\t},\n\t\tinitWarehouseSearch() {\n\t\t\tconst $warehouse = $( '#shipping_nova_poshta_for_woocommerce_warehouse' );\n\t\t\tif ( ! $warehouse.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$warehouse.np_select2( {\n\t\t\t\tlanguage: shippingNovaPoshtaForWoocommerce.language,\n\t\t\t} );\n\t\t},\n\t\tgetQueryParams( params, url ) {\n\t\t\tlet href = url;\n\t\t\tlet reg = new RegExp( '[?&]' + params + '=([^&#]*)', 'i' );\n\t\t\tlet queryString = reg.exec( href );\n\t\t\treturn queryString ? queryString[ 1 ] : '';\n\t\t},\n\t};\n\n\treturn app;\n}( document, window, jQuery ) );\n\nNovaPoshta.init();\n"],"sourceRoot":""}